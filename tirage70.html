<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tirage 9 â€” PassÃ© / PrÃ©sent / Futur (profondeur + PDF)</title>
<style>
  :root{--bg:#0b0b0b;--bg2:#111;--fg:#eee;--muted:#a8a8a8;--border:#2a2a2a;--accent:#23c45e}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:24px}
  h1{margin:0 0 12px 0}
  h2{margin:18px 0 8px 0;font-size:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  input{flex:1;min-width:260px;padding:10px;border-radius:10px;border:1px solid var(--border);background:#121212;color:var(--fg)}
  .btn{padding:10px 14px;border-radius:12px;border:0;background:var(--accent);color:#fff;cursor:pointer}
  .btn.secondary{background:#282828}
  .grid{display:grid;grid-template-columns:repeat(3,minmax(220px,1fr));gap:12px}
  .card{background:#141414;border:1px solid var(--border);border-radius:14px;padding:12px}
  .label{color:#aaa;font-size:13px}
  .title{font-weight:bold;margin:4px 0 6px}
  .text{color:#cfcfcf;font-size:14px}
  .zone-explain{margin-top:10px;padding:12px;border-radius:12px;background:var(--bg2);border:1px solid var(--border);white-space:pre-wrap}
  .summary{margin-top:16px;padding:12px;border-radius:12px;background:var(--bg2);border:1px solid var(--border);white-space:pre-wrap}
  .note{color:var(--muted);font-size:12px;margin-top:8px}
  @media print{
    body{background:#fff;color:#000}
    .wrap{max-width:100%;padding:0 12mm}
    .row, .note{display:none}
    .card{background:#fff;border:1px solid #ccc}
    .zone-explain, .summary{background:#fff;border:1px solid #ccc}
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>ðŸŽ´ Tirage 9 cartes â€” PassÃ© / PrÃ©sent / Futur</h1>
  <div class="row">
    <input id="question" placeholder="Ã‰crivez ici votre question avant le tirage..." />
    <button id="draw" class="btn">Tirer 9 cartes</button>
    <button id="print" class="btn secondary">Imprimer / PDF</button>
  </div>
  <div id="out"></div>
  <div class="note">Conseil : posez une question ouverte (ex. Â« Quelle Ã©nergie mâ€™aide Ã  avancer dans ce projet ? Â»).</div>
</div>

<script>
// ===== Jeu complet (70 cartes) =====
var DECK = [
  {number:1,name:"Le Soleil",meaning:"ClartÃ©, succÃ¨s, illumination, Ã©nergie positive."},
  {number:2,name:"La Lune",meaning:"Intuition, Ã©motions cachÃ©es, illusions, inconscient."},
  {number:3,name:"Lâ€™Ã‰toile",meaning:"Espoir, inspiration, guidance spirituelle."},
  {number:4,name:"La Mort",meaning:"Transformation, fin de cycle, renaissance."},
  {number:5,name:"Le Monde",meaning:"Accomplissement, rÃ©alisation, harmonie."},
  {number:6,name:"La Tour",meaning:"Choc, crise salutaire, fondations Ã  repenser."},
  {number:7,name:"La Clef",meaning:"Solution, ouverture, rÃ©ponse trouvÃ©e."},
  {number:8,name:"Le Livre",meaning:"Savoir cachÃ©, secrets, enseignement."},
  {number:9,name:"Lâ€™Arbre",meaning:"Croissance, enracinement, santÃ©, stabilitÃ©."},
  {number:10,name:"La Maison",meaning:"Famille, foyer, sÃ©curitÃ© intÃ©rieure."},
  {number:11,name:"Le Voyage",meaning:"DÃ©placement, changement, ouverture dâ€™esprit."},
  {number:12,name:"Le Serpent",meaning:"Manipulation, tentation, trahison."},
  {number:13,name:"Le Chien",meaning:"FidÃ©litÃ©, loyautÃ©, ami sincÃ¨re."},
  {number:14,name:"La Balance",meaning:"Justice, Ã©quilibre, choix Ã  faire."},
  {number:15,name:"La Croix",meaning:"Ã‰preuve, destin, spiritualitÃ©, sacrifice."},
  {number:16,name:"La Main tendue",meaning:"Aide, soutien, rÃ©conciliation."},
  {number:17,name:"Le CÅ“ur",meaning:"Amour, Ã©motions profondes, sincÃ©ritÃ©."},
  {number:18,name:"Les ChaÃ®nes",meaning:"Attachement, dÃ©pendance, blocage karmique."},
  {number:19,name:"Lâ€™Ancre",meaning:"StabilitÃ©, persÃ©vÃ©rance, fidÃ©litÃ©."},
  {number:20,name:"Le Pont",meaning:"Transition, passage, solution de lien."},
  {number:21,name:"Les Nuages",meaning:"Confusion, incertitude, doutes."},
  {number:22,name:"Le Miroir",meaning:"RÃ©flexion, vÃ©ritÃ© rÃ©vÃ©lÃ©e, introspection."},
  {number:23,name:"Lâ€™Oiseau",meaning:"Messages, communication, nouvelles."},
  {number:24,name:"La Cloche",meaning:"Annonce, Ã©vÃ©nement important, rÃ©veil."},
  {number:25,name:"Lâ€™Enfant",meaning:"Nouveau dÃ©part, innocence, spontanÃ©itÃ©."},
  {number:26,name:"Le Masque",meaning:"Illusion, fausse apparence, dissimulation."},
  {number:27,name:"Lâ€™Ã‰chelle",meaning:"Ã‰lÃ©vation, progression, ascension."},
  {number:28,name:"Le Cadeau empoisonnÃ©",meaning:"PrÃ©sent trompeur, piÃ¨ge dÃ©guisÃ©, prudence."},
  {number:29,name:"Le Temps",meaning:"Patience, cycle, maturitÃ©."},
  {number:30,name:"La Couronne",meaning:"Victoire, reconnaissance, accomplissement."},
  {number:31,name:"Le Feu",meaning:"Passion, Ã©nergie, colÃ¨re, transformation."},
  {number:32,name:"Lâ€™Eau",meaning:"Ã‰motions, fluiditÃ©, purification."},
  {number:33,name:"La Terre",meaning:"Ancrage, sÃ©curitÃ©, ressources."},
  {number:34,name:"Lâ€™Air",meaning:"PensÃ©es, idÃ©es, communication."},
  {number:35,name:"Lâ€™Arme",meaning:"Conflit, protection, dÃ©fense."},
  {number:36,name:"La Fleur",meaning:"BeautÃ©, douceur, sensibilitÃ©."},
  {number:37,name:"La Porte",meaning:"Ouverture, opportunitÃ©, choix."},
  {number:38,name:"Le Jardin",meaning:"SociabilitÃ©, abondance, Ã©changes."},
  {number:39,name:"La Route",meaning:"Choix, chemin de vie, dÃ©cision."},
  {number:40,name:"La Pluie",meaning:"Nettoyage, tristesse, purification."},
  {number:41,name:"Le Tonnerre",meaning:"RÃ©vÃ©lation soudaine, bouleversement."},
  {number:42,name:"Lâ€™Ã‰pÃ©e",meaning:"DÃ©cision, vÃ©ritÃ©, tranchant."},
  {number:43,name:"La Coupe",meaning:"Amour, rÃ©ceptivitÃ©, Ã©motions partagÃ©es."},
  {number:44,name:"La Cour",meaning:"Jugement, regard des autres, sociÃ©tÃ©."},
  {number:45,name:"Le TrÃ©sor",meaning:"Richesse, valeur intÃ©rieure, dons cachÃ©s."},
  {number:46,name:"La Boussole",meaning:"Orientation, direction, guidance."},
  {number:47,name:"Le Cheval",meaning:"Ã‰nergie, vitalitÃ©, libertÃ©."},
  {number:48,name:"La Montagne",meaning:"Obstacle, Ã©preuve, persÃ©vÃ©rance."},
  {number:49,name:"Lâ€™OcÃ©an",meaning:"Immense potentiel, inconscient, profondeur."},
  {number:50,name:"Le Phare",meaning:"Guidance, lumiÃ¨re dans lâ€™obscuritÃ©."},
  {number:51,name:"Lâ€™Aigle",meaning:"Vision claire, hauteur, sagesse."},
  {number:52,name:"La ForÃªt",meaning:"MystÃ¨re, protection, quÃªte."},
  {number:53,name:"Le Verre brisÃ©",meaning:"Cassure, rupture, vÃ©ritÃ© qui Ã©clate."},
  {number:54,name:"Le DÃ©sert",meaning:"Vide, solitude, Ã©preuve intÃ©rieure."},
  {number:55,name:"Le Sang",meaning:"Ã‰nergie vitale, hÃ©ritage, force."},
  {number:56,name:"Le Dragon",meaning:"Puissance, tentation, Ã©preuve initiatique."},
  {number:57,name:"Le Voile",meaning:"Illusion, vÃ©ritÃ© cachÃ©e, mystÃ¨re."},
  {number:58,name:"La Pierre",meaning:"SoliditÃ©, mÃ©moire, constance."},
  {number:59,name:"Le Navire",meaning:"Voyage, exploration, ouverture."},
  {number:60,name:"Le Mur",meaning:"Blocage, limite, protection."},
  {number:61,name:"La Source",meaning:"PuretÃ©, guÃ©rison, nouveau dÃ©part."},
  {number:62,name:"La Courbe",meaning:"Changement inattendu, dÃ©tour nÃ©cessaire."},
  {number:63,name:"Le Feu follet",meaning:"Illusion passagÃ¨re, distraction."},
  {number:64,name:"La Femme rouge",meaning:"SÃ©duction, passion, influence magnÃ©tique."},
  {number:65,name:"Lâ€™Homme noir",meaning:"MystÃ¨re, autoritÃ©, influence masculine."},
  {number:66,name:"Le Cri",meaning:"LibÃ©ration, vÃ©ritÃ© exprimÃ©e, colÃ¨re."},
  {number:67,name:"Le Cercle",meaning:"Ã‰ternel recommencement, unitÃ©."},
  {number:68,name:"Le ScarabÃ©e",meaning:"Chance, transformation, protection."},
  {number:69,name:"Le Calice",meaning:"SpiritualitÃ©, communion, offrande."},
  {number:70,name:"Lâ€™Aurore",meaning:"Nouveau dÃ©part, lumiÃ¨re aprÃ¨s lâ€™ombre."}
];

// ===== Utilitaires =====
function shuffle(a){ for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=a[i];a[i]=a[j];a[j]=t;} return a; }
function draw9(){ return shuffle(DECK.slice()).slice(0,9); }

// ===== Analyse simple par mots-clÃ©s =====
var POS = ["succÃ¨s","lumiÃ¨re","espoir","protection","ouverture","solution","amour","stabilitÃ©","guÃ©rison","chance","harmonie","guidance","renaissance","accomplissement","soutien","fidÃ©litÃ©","libertÃ©","croissance","abondance"];
var NEG = ["cassure","rupture","trahison","obstacle","blocage","Ã©preuve","illusion","manipulation","colÃ¨re","tristesse","vide","solitude","danger","dÃ©pendance","conflit","peur","fatigue","crise"];

function score(text){
  var t=(text||"").toLowerCase(), p=0, n=0;
  POS.forEach(function(k){ if(t.indexOf(k)>-1) p++; });
  NEG.forEach(function(k){ if(t.indexOf(k)>-1) n++; });
  return {p:p,n:n};
}

function names(arr){
  return arr.map(function(c){return c.name;}).join(", ");
}

// GÃ©nÃ¨re des textes dâ€™accompagnement pour donner de la profondeur
function integrationEmotionnelle(pol){
  if(pol.p>pol.n) return "Accueillez la confiance : respirez plus lentement, autorisez-vous Ã  recevoir le soutien disponible.";
  if(pol.n>pol.p) return "Autorisez les Ã©motions Ã  circuler sans jugement ; ancrez-vous (marche, eau, souffle) avant dâ€™agir.";
  return "Restez centrÃ©e : observez sans forcer, laissez venir le bon timing.";
}
function questionCoaching(zone){
  if(zone==="PassÃ©") return "Quelle leÃ§on passÃ©e mÃ©rite dâ€™Ãªtre honorÃ©e pour ne plus se rÃ©pÃ©ter ?";
  if(zone==="PrÃ©sent") return "Quel choix simple aujourdâ€™hui ferait une vraie diffÃ©rence ?";
  return "Quelle petite action concrÃ¨te prÃ©pare au mieux ce futur dÃ©sirÃ© ?";
}
function action48(zone, pol){
  var base = (pol.p>=pol.n) ? "Amplifier lâ€™Ã©lan positif" : "AllÃ©ger la pression";
  if(zone==="PassÃ©") return base + " : Ã©crire 3 leÃ§ons-clÃ©s et remercier la version passÃ©e de vous-mÃªme.";
  if(zone==="PrÃ©sent") return base + " : choisir 1 prioritÃ© et lui offrir 25 minutes de focus.";
  return base + " : planifier un micro-pas datÃ© (15 minutes) liÃ© au futur souhaitÃ©.";
}

// Explication dÃ©taillÃ©e dâ€™une zone (3 cartes)
function zoneExplain(arr, label){
  var theme = arr[1]; // carte centrale
  var supports = arr.filter(function(c){ var s=score(c.meaning); return s.p > s.n; }).map(function(c){return c.name;});
  var tensions = arr.filter(function(c){ var s=score(c.meaning); return s.n > s.p; }).map(function(c){return c.name;});
  var pol = arr.map(function(c){return score(c.meaning);}).reduce(function(a,s){return {p:a.p+s.p,n:a.n+s.n};},{p:0,n:0});

  var txt  = label + " â€” ThÃ¨me central : " + theme.number + ". " + theme.name + " â€” " + theme.meaning + "\n";
  txt += (supports.length ? "Soutiens : " + supports.join(", ") + ".\n" : "Soutiens : discrets, Ã  cultiver.\n");
  txt += (tensions.length ? "Tensions : " + tensions.join(", ") + ".\n" : "Tensions : peu marquÃ©es.\n");
  txt += "IntÃ©gration Ã©motionnelle : " + integrationEmotionnelle(pol) + "\n";
  txt += "Question de coaching : " + questionCoaching(label) + "\n";
  txt += "Action (48h) : " + action48(label, pol);
  return txt;
}

// RÃ©sumÃ© global
function summarizeGlobal(cards, question){
  var past = cards.slice(0,3), present = cards.slice(3,6), future = cards.slice(6,9);
  var pol = cards.map(function(c){return score(c.meaning);}).reduce(function(a,s){return {p:a.p+s.p, n:a.n+s.n};},{p:0,n:0});
  var trend = (pol.p>=pol.n) ? "Ã‰nergie gÃ©nÃ©rale constructive : ouvertures et solutions possibles."
                              : "Ã‰nergie gÃ©nÃ©rale sous tension : clarifier les blocages avant lâ€™Ã©lan.";
  var pivot = present[1];
  var txt  = "Question : " + (question || "non prÃ©cisÃ©e") + "\n\n";
  txt += "PassÃ© : " + names(past) + "\n";
  txt += "PrÃ©sent : " + names(present) + "\n";
  txt += "Futur : " + names(future) + "\n\n";
  txt += trend + "\n";
  txt += "Pivot (prÃ©sent â€” carte centrale) : " + pivot.number + ". " + pivot.name + " â€” " + pivot.meaning;
  return txt;
}

// ===== UI =====
document.getElementById('draw').addEventListener('click', function(){
  var q = document.getElementById('question').value;
  var cards = draw9();
  var out = document.getElementById('out');
  out.innerHTML = "";

  var zones = ["PassÃ©","PrÃ©sent","Futur"];
  for(var z=0; z<3; z++){
    var zoneDiv = document.createElement('div');
    var h = document.createElement('h2'); h.textContent = zones[z];
    zoneDiv.appendChild(h);

    var g = document.createElement('div'); g.className = "grid";
    for(var i=0;i<3;i++){
      var c = cards[z*3+i];
      var box = document.createElement('div'); box.className="card";
      var lab = document.createElement('div'); lab.className="label"; lab.textContent = zones[z] + " " + (i+1);
      var title = document.createElement('div'); title.className="title"; title.textContent = c.number + ". " + c.name;
      var txt = document.createElement('div'); txt.className="text"; txt.textContent = c.meaning;
      box.appendChild(lab); box.appendChild(title); box.appendChild(txt);
      g.appendChild(box);
    }
    zoneDiv.appendChild(g);

    var explain = document.createElement('div'); explain.className="zone-explain";
    var start = z*3;
    var arr = [cards[start], cards[start+1], cards[start+2]];
    explain.textContent = zoneExplain(arr, zones[z]);
    zoneDiv.appendChild(explain);

    out.appendChild(zoneDiv);
  }

  var sum = document.createElement('div'); sum.className="summary";
  sum.textContent = summarizeGlobal(cards, q);
  out.appendChild(sum);
});

document.getElementById('print').addEventListener('click', function(){
  window.print();
});
</script>
</body>
</html>