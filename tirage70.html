<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tirage 9 ‚Äî Pass√© / Pr√©sent / Futur (profondeur + PDF)</title>
<style>
  :root{--bg:#0b0b0b;--bg2:#111;--fg:#eee;--muted:#a8a8a8;--border:#2a2a2a;--accent:#23c45e}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:sans-serif}
  .wrap{max-width:1100px;margin:0 auto;padding:24px}
  h1{margin:0 0 12px 0}
  h2{margin:18px 0 8px 0;font-size:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  input{flex:1;min-width:260px;padding:10px;border-radius:10px;border:1px solid var(--border);background:#121212;color:var(--fg)}
  .btn{padding:10px 14px;border-radius:12px;border:0;background:var(--accent);color:#fff;cursor:pointer}
  .btn.secondary{background:#282828}
  .grid{display:grid;grid-template-columns:repeat(3,minmax(220px,1fr));gap:12px}
  .card{background:#141414;border:1px solid var(--border);border-radius:14px;padding:12px}
  .label{color:#aaa;font-size:13px}
  .title{font-weight:bold;margin:4px 0 6px}
  .text{color:#cfcfcf;font-size:14px}
  .zone-explain{margin-top:10px;padding:12px;border-radius:12px;background:var(--bg2);border:1px solid var(--border);white-space:pre-wrap}
  .summary{margin-top:16px;padding:12px;border-radius:12px;background:var(--bg2);border:1px solid var(--border);white-space:pre-wrap}
  .note{color:var(--muted);font-size:12px;margin-top:8px}
  @media print{
    body{background:#fff;color:#000}
    .wrap{max-width:100%;padding:0 12mm}
    .row, .note{display:none}
    .card{background:#fff;border:1px solid #ccc}
    .zone-explain, .summary{background:#fff;border:1px solid #ccc}
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>üé¥ Tirage 9 cartes ‚Äî Pass√© / Pr√©sent / Futur</h1>
  <div class="row">
    <input id="question" placeholder="√âcrivez ici votre question avant le tirage..." />
    <button id="draw" class="btn">Tirer 9 cartes</button>
    <button id="print" class="btn secondary">Imprimer / PDF</button>
  </div>
  <div id="out"></div>
  <div class="note">Conseil : posez une question ouverte (ex. ¬´ Quelle √©nergie m‚Äôaide √† avancer dans ce projet ? ¬ª).</div>
</div>

<script>
// ===== Jeu complet (70 cartes) =====
var DECK = [
  {number:1,name:"Le Soleil",meaning:"Clart√©, succ√®s, illumination, √©nergie positive."},
  {number:2,name:"La Lune",meaning:"Intuition, √©motions cach√©es, illusions, inconscient."},
  {number:3,name:"L‚Äô√âtoile",meaning:"Espoir, inspiration, guidance spirituelle."},
  {number:4,name:"La Mort",meaning:"Transformation, fin de cycle, renaissance."},
  {number:5,name:"Le Monde",meaning:"Accomplissement, r√©alisation, harmonie."},
  {number:6,name:"La Tour",meaning:"Choc, crise salutaire, fondations √† repenser."},
  {number:7,name:"La Clef",meaning:"Solution, ouverture, r√©ponse trouv√©e."},
  {number:8,name:"Le Livre",meaning:"Savoir cach√©, secrets, enseignement."},
  {number:9,name:"L‚ÄôArbre",meaning:"Croissance, enracinement, sant√©, stabilit√©."},
  {number:10,name:"La Maison",meaning:"Famille, foyer, s√©curit√© int√©rieure."},
  {number:11,name:"Le Voyage",meaning:"D√©placement, changement, ouverture d‚Äôesprit."},
  {number:12,name:"Le Serpent",meaning:"Manipulation, tentation, trahison."},
  {number:13,name:"Le Chien",meaning:"Fid√©lit√©, loyaut√©, ami sinc√®re."},
  {number:14,name:"La Balance",meaning:"Justice, √©quilibre, choix √† faire."},
  {number:15,name:"La Croix",meaning:"√âpreuve, destin, spiritualit√©, sacrifice."},
  {number:16,name:"La Main tendue",meaning:"Aide, soutien, r√©conciliation."},
  {number:17,name:"Le C≈ìur",meaning:"Amour, √©motions profondes, sinc√©rit√©."},
  {number:18,name:"Les Cha√Ænes",meaning:"Attachement, d√©pendance, blocage karmique."},
  {number:19,name:"L‚ÄôAncre",meaning:"Stabilit√©, pers√©v√©rance, fid√©lit√©."},
  {number:20,name:"Le Pont",meaning:"Transition, passage, solution de lien."},
  {number:21,name:"Les Nuages",meaning:"Confusion, incertitude, doutes."},
  {number:22,name:"Le Miroir",meaning:"R√©flexion, v√©rit√© r√©v√©l√©e, introspection."},
  {number:23,name:"L‚ÄôOiseau",meaning:"Messages, communication, nouvelles."},
  {number:24,name:"La Cloche",meaning:"Annonce, √©v√©nement important, r√©veil."},
  {number:25,name:"L‚ÄôEnfant",meaning:"Nouveau d√©part, innocence, spontan√©it√©."},
  {number:26,name:"Le Masque",meaning:"Illusion, fausse apparence, dissimulation."},
  {number:27,name:"L‚Äô√âchelle",meaning:"√âl√©vation, progression, ascension."},
  {number:28,name:"Le Cadeau empoisonn√©",meaning:"Pr√©sent trompeur, pi√®ge d√©guis√©, prudence."},
  {number:29,name:"Le Temps",meaning:"Patience, cycle, maturit√©."},
  {number:30,name:"La Couronne",meaning:"Victoire, reconnaissance, accomplissement."},
  {number:31,name:"Le Feu",meaning:"Passion, √©nergie, col√®re, transformation."},
  {number:32,name:"L‚ÄôEau",meaning:"√âmotions, fluidit√©, purification."},
  {number:33,name:"La Terre",meaning:"Ancrage, s√©curit√©, ressources."},
  {number:34,name:"L‚ÄôAir",meaning:"Pens√©es, id√©es, communication."},
  {number:35,name:"L‚ÄôArme",meaning:"Conflit, protection, d√©fense."},
  {number:36,name:"La Fleur",meaning:"Beaut√©, douceur, sensibilit√©."},
  {number:37,name:"La Porte",meaning:"Ouverture, opportunit√©, choix."},
  {number:38,name:"Le Jardin",meaning:"Sociabilit√©, abondance, √©changes."},
  {number:39,name:"La Route",meaning:"Choix, chemin de vie, d√©cision."},
  {number:40,name:"La Pluie",meaning:"Nettoyage, tristesse, purification."},
  {number:41,name:"Le Tonnerre",meaning:"R√©v√©lation soudaine, bouleversement."},
  {number:42,name:"L‚Äô√âp√©e",meaning:"D√©cision, v√©rit√©, tranchant."},
  {number:43,name:"La Coupe",meaning:"Amour, r√©ceptivit√©, √©motions partag√©es."},
  {number:44,name:"La Cour",meaning:"Jugement, regard des autres, soci√©t√©."},
  {number:45,name:"Le Tr√©sor",meaning:"Richesse, valeur int√©rieure, dons cach√©s."},
  {number:46,name:"La Boussole",meaning:"Orientation, direction, guidance."},
  {number:47,name:"Le Cheval",meaning:"√ânergie, vitalit√©, libert√©."},
  {number:48,name:"La Montagne",meaning:"Obstacle, √©preuve, pers√©v√©rance."},
  {number:49,name:"L‚ÄôOc√©an",meaning:"Immense potentiel, inconscient, profondeur."},
  {number:50,name:"Le Phare",meaning:"Guidance, lumi√®re dans l‚Äôobscurit√©."},
  {number:51,name:"L‚ÄôAigle",meaning:"Vision claire, hauteur, sagesse."},
  {number:52,name:"La For√™t",meaning:"Myst√®re, protection, qu√™te."},
  {number:53,name:"Le Verre bris√©",meaning:"Cassure, rupture, v√©rit√© qui √©clate."},
  {number:54,name:"Le D√©sert",meaning:"Vide, solitude, √©preuve int√©rieure."},
  {number:55,name:"Le Sang",meaning:"√ânergie vitale, h√©ritage, force."},
  {number:56,name:"Le Dragon",meaning:"Puissance, tentation, √©preuve initiatique."},
  {number:57,name:"Le Voile",meaning:"Illusion, v√©rit√© cach√©e, myst√®re."},
  {number:58,name:"La Pierre",meaning:"Solidit√©, m√©moire, constance."},
  {number:59,name:"Le Navire",meaning:"Voyage, exploration, ouverture."},
  {number:60,name:"Le Mur",meaning:"Blocage, limite, protection."},
  {number:61,name:"La Source",meaning:"Puret√©, gu√©rison, nouveau d√©part."},
  {number:62,name:"La Courbe",meaning:"Changement inattendu, d√©tour n√©cessaire."},
  {number:63,name:"Le Feu follet",meaning:"Illusion passag√®re, distraction."},
  {number:64,name:"La Femme rouge",meaning:"S√©duction, passion, influence magn√©tique."},
  {number:65,name:"L‚ÄôHomme noir",meaning:"Myst√®re, autorit√©, influence masculine."},
  {number:66,name:"Le Cri",meaning:"Lib√©ration, v√©rit√© exprim√©e, col√®re."},
  {number:67,name:"Le Cercle",meaning:"√âternel recommencement, unit√©."},
  {number:68,name:"Le Scarab√©e",meaning:"Chance, transformation, protection."},
  {number:69,name:"Le Calice",meaning:"Spiritualit√©, communion, offrande."},
  {number:70,name:"L‚ÄôAurore",meaning:"Nouveau d√©part, lumi√®re apr√®s l‚Äôombre."}
];

// ===== Utilitaires =====
function shuffle(a){ for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=a[i];a[i]=a[j];a[j]=t;} return a; }
function draw9(){ return shuffle(DECK.slice()).slice(0,9); }

// ===== Analyse simple par mots-cl√©s =====
var POS = ["succ√®s","lumi√®re","espoir","protection","ouverture","solution","amour","stabilit√©","gu√©rison","chance","harmonie","guidance","renaissance","accomplissement","soutien","fid√©lit√©","libert√©","croissance","abondance"];
var NEG = ["cassure","rupture","trahison","obstacle","blocage","√©preuve","illusion","manipulation","col√®re","tristesse","vide","solitude","danger","d√©pendance","conflit","peur","fatigue","crise"];

function score(text){
  var t=(text||"").toLowerCase(), p=0, n=0;
  POS.forEach(function(k){ if(t.indexOf(k)>-1) p++; });
  NEG.forEach(function(k){ if(t.indexOf(k)>-1) n++; });
  return {p:p,n:n};
}

function names(arr){
  return arr.map(function(c){return c.name;}).join(", ");
}

// G√©n√®re des textes d‚Äôaccompagnement pour donner de la profondeur
function integrationEmotionnelle(pol){
  if(pol.p>pol.n) return "Accueillez la confiance : respirez plus lentement, autorisez-vous √† recevoir le soutien disponible.";
  if(pol.n>pol.p) return "Autorisez les √©motions √† circuler sans jugement ; ancrez-vous (marche, eau, souffle) avant d‚Äôagir.";
  return "Restez centr√©e : observez sans forcer, laissez venir le bon timing.";
}
function questionCoaching(zone){
  if(zone==="Pass√©") return "Quelle le√ßon pass√©e m√©rite d‚Äô√™tre honor√©e pour ne plus se r√©p√©ter ?";
  if(zone==="Pr√©sent") return "Quel choix simple aujourd‚Äôhui ferait une vraie diff√©rence ?";
  return "Quelle petite action concr√®te pr√©pare au mieux ce futur d√©sir√© ?";
}
function action48(zone, pol){
  var base = (pol.p>=pol.n) ? "Amplifier l‚Äô√©lan positif" : "All√©ger la pression";
  if(zone==="Pass√©") return base + " : √©crire 3 le√ßons-cl√©s et remercier la version pass√©e de vous-m√™me.";
  if(zone==="Pr√©sent") return base + " : choisir 1 priorit√© et lui offrir 25 minutes de focus.";
  return base + " : planifier un micro-pas dat√© (15 minutes) li√© au futur souhait√©.";
}

// Explication d√©taill√©e d‚Äôune zone (3 cartes)
function zoneExplain(arr, label){
  var theme = arr[1]; // carte centrale
  var supports = arr.filter(function(c){ var s=score(c.meaning); return s.p > s.n; }).map(function(c){return c.name;});
  var tensions = arr.filter(function(c){ var s=score(c.meaning); return s.n > s.p; }).map(function(c){return c.name;});
  var pol = arr.map(function(c){return score(c.meaning);}).reduce(function(a,s){return {p:a.p+s.p,n:a.n+s.n};},{p:0,n:0});

  var txt  = label + " ‚Äî Th√®me central : " + theme.number + ". " + theme.name + " ‚Äî " + theme.meaning + "\n";
  txt += (supports.length ? "Soutiens : " + supports.join(", ") + ".\n" : "Soutiens : discrets, √† cultiver.\n");
  txt += (tensions.length ? "Tensions : " + tensions.join(", ") + ".\n" : "Tensions : peu marqu√©es.\n");
  txt += "Int√©gration √©motionnelle : " + integrationEmotionnelle(pol) + "\n";
  txt += "Question de coaching : " + questionCoaching(label) + "\n";
  txt += "Action (48h) : " + action48(label, pol);
  return txt;
}

// R√©sum√© global
function summarizeGlobal(cards, question){
  var past = cards.slice(0,3), present = cards.slice(3,6), future = cards.slice(6,9);
  var pol = cards.map(function(c){return score(c.meaning);}).reduce(function(a,s){return {p:a.p+s.p, n:a.n+s.n};},{p:0,n:0});
  var trend = (pol.p>=pol.n) ? "√ânergie g√©n√©rale constructive : ouvertures et solutions possibles."
                              : "√ânergie g√©n√©rale sous tension : clarifier les blocages avant l‚Äô√©lan.";
  var pivot = present[1];
  var txt  = "Question : " + (question || "non pr√©cis√©e") + "\n\n";
  txt += "Pass√© : " + names(past) + "\n";
  txt += "Pr√©sent : " + names(present) + "\n";
  txt += "Futur : " + names(future) + "\n\n";
  txt += trend + "\n";
  txt += "Pivot (pr√©sent ‚Äî carte centrale) : " + pivot.number + ". " + pivot.name + " ‚Äî " + pivot.meaning;
  return txt;
}

// ===== UI =====
document.getElementById('draw').addEventListener('click', function(){
  var q = document.getElementById('question').value;
  var cards = draw9();
  var out = document.getElementById('out');
  out.innerHTML = "";

  var zones = ["Pass√©","Pr√©sent","Futur"];
  for(var z=0; z<3; z++){
    var zoneDiv = document.createElement('div');
    var h = document.createElement('h2'); h.textContent = zones[z];
    zoneDiv.appendChild(h);

    var g = document.createElement('div'); g.className = "grid";
    for(var i=0;i<3;i++){
      var c = cards[z*3+i];
      var box = document.createElement('div'); box.className="card";
      var lab = document.createElement('div'); lab.className="label"; lab.textContent = zones[z] + " " + (i+1);
      var title = document.createElement('div'); title.className="title"; title.textContent = c.number + ". " + c.name;
      var txt = document.createElement('div'); txt.className="text"; txt.textContent = c.meaning;
      box.appendChild(lab); box.appendChild(title); box.appendChild(txt);
      g.appendChild(box);
    }
    zoneDiv.appendChild(g);

    var explain = document.createElement('div'); explain.className="zone-explain";
    var start = z*3;
    var arr = [cards[start], cards[start+1], cards[start+2]];
    explain.textContent = zoneExplain(arr, zones[z]);
    zoneDiv.appendChild(explain);

    out.appendChild(zoneDiv);
  }

  var sum = document.createElement('div'); sum.className="summary";
  sum.textContent = summarizeGlobal(cards, q);
  out.appendChild(sum);
});

document.getElementById('print').addEventListener('click', function(){
  window.print();
});
</script>
</body>
</html>